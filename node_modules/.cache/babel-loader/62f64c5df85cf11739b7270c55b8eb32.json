{"ast":null,"code":"import React,{useEffect}from'react';import{LinkContainer}from'react-router-bootstrap';import{Table,Button}from'react-bootstrap';import{useDispatch,useSelector}from'react-redux';import Message from'../components/Message';import Loader from'../components/Loader';import{listOrders}from'../actions/orderActions';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var OrderListScreen=function OrderListScreen(_ref){var history=_ref.history;var dispatch=useDispatch();var orderList=useSelector(function(state){return state.orderList;});var loading=orderList.loading,error=orderList.error,orders=orderList.orders;var userLogin=useSelector(function(state){return state.userLogin;});var userInfo=userLogin.userInfo;useEffect(function(){if(userInfo&&userInfo.isAdmin){dispatch(listOrders());}else{history.push('/login');}},[dispatch,userInfo,history]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Orders\"}),loading?/*#__PURE__*/_jsx(Loader,{}):error?/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:error}):/*#__PURE__*/_jsxs(Table,{bordered:true,hover:true,responsive:true,className:\"table-sm\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"User\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Date\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Total\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Paid\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Delivered\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Info\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:orders.map(function(order){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:order._id}),/*#__PURE__*/_jsx(\"td\",{children:order.user&&order.user.name}),/*#__PURE__*/_jsx(\"td\",{children:order.createdAt.substring(0,10)}),/*#__PURE__*/_jsxs(\"td\",{children:[\"USD\",order.totalPrice]}),/*#__PURE__*/_jsx(\"td\",{children:order.isPaid?order.paidAt.substring(0,10):/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-times\",style:{color:'red'}})}),/*#__PURE__*/_jsx(\"td\",{children:order.isDeliverd?order.deliveredAt.substring(0,10):/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-times\",style:{color:'red'}})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(LinkContainer,{to:\"/order/\".concat(order._id),children:/*#__PURE__*/_jsx(Button,{className:\"btn-sm\",variant:\"light\",children:\"Details\"})})})]},order._id);})})]})]});};export default OrderListScreen;","map":{"version":3,"names":["React","useEffect","LinkContainer","Table","Button","useDispatch","useSelector","Message","Loader","listOrders","OrderListScreen","history","dispatch","orderList","state","loading","error","orders","userLogin","userInfo","isAdmin","push","map","order","_id","user","name","createdAt","substring","totalPrice","isPaid","paidAt","color","isDeliverd","deliveredAt"],"sources":["C:/fyp-final-project/fyp-react-complete-ecommerce/frontend/src/screens/OrderListScreen.js"],"sourcesContent":["import React, { useEffect } from 'react'\r\nimport { LinkContainer } from 'react-router-bootstrap'\r\nimport { Table, Button } from 'react-bootstrap'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport Message from '../components/Message'\r\nimport Loader from '../components/Loader'\r\nimport { listOrders } from '../actions/orderActions'\r\n\r\nconst OrderListScreen = ({ history }) => {\r\n\tconst dispatch = useDispatch()\r\n\r\n\tconst orderList = useSelector((state) => state.orderList)\r\n\tconst { loading, error, orders } = orderList\r\n\r\n\tconst userLogin = useSelector((state) => state.userLogin)\r\n\tconst { userInfo } = userLogin\r\n\r\n\tuseEffect(() => {\r\n\t\tif (userInfo && userInfo.isAdmin) {\r\n\t\t\tdispatch(listOrders())\r\n\t\t} else {\r\n\t\t\thistory.push('/login')\r\n\t\t}\r\n\t}, [dispatch, userInfo, history])\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<h1>Orders</h1>\r\n\t\t\t{loading ? (\r\n\t\t\t\t<Loader />\r\n\t\t\t) : error ? (\r\n\t\t\t\t<Message variant='danger'>{error}</Message>\r\n\t\t\t) : (\r\n\t\t\t\t<Table bordered hover responsive className='table-sm'>\r\n\t\t\t\t\t<thead>\r\n\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t<th>ID</th>\r\n\t\t\t\t\t\t\t<th>User</th>\r\n\t\t\t\t\t\t\t<th>Date</th>\r\n\t\t\t\t\t\t\t<th>Total</th>\r\n\t\t\t\t\t\t\t<th>Paid</th>\r\n\t\t\t\t\t\t\t<th>Delivered</th>\r\n\t\t\t\t\t\t\t<th>Info</th>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t</thead>\r\n\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t{orders.map((order) => (\r\n\t\t\t\t\t\t\t<tr key={order._id}>\r\n\t\t\t\t\t\t\t\t<td>{order._id}</td>\r\n\t\t\t\t\t\t\t\t<td>{order.user && order.user.name}</td>\r\n\t\t\t\t\t\t\t\t<td>{order.createdAt.substring(0, 10)}</td>\r\n\t\t\t\t\t\t\t\t<td>USD{order.totalPrice}</td>\r\n\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t{order.isPaid ? (\r\n\t\t\t\t\t\t\t\t\t\torder.paidAt.substring(0, 10)\r\n\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t<i className='fas fa-times' style={{ color: 'red' }}></i>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t{order.isDeliverd ? (\r\n\t\t\t\t\t\t\t\t\t\torder.deliveredAt.substring(0, 10)\r\n\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t<i className='fas fa-times' style={{ color: 'red' }}></i>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t<LinkContainer to={`/order/${order._id}`}>\r\n\t\t\t\t\t\t\t\t\t\t<Button className='btn-sm' variant='light'>\r\n\t\t\t\t\t\t\t\t\t\t\tDetails\r\n\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t</LinkContainer>\r\n\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</tbody>\r\n\t\t\t\t</Table>\r\n\t\t\t)}\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nexport default OrderListScreen\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}