{"ast":null,"code":"import _toConsumableArray from\"C:/fyp-final-project/fyp-react-complete-ecommerce/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import React,{useEffect}from'react';import{Link}from'react-router-dom';import{useDispatch,useSelector}from'react-redux';import{Row,Col,ListGroup,Image,Form,Button,Card}from'react-bootstrap';import Message from'../components/Message';import{addToCart,removeFromCart}from'../actions/cartActions';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CartScreen=function CartScreen(_ref){var match=_ref.match,location=_ref.location,history=_ref.history;// Get product id\nvar productId=match.params.id;// Get the quantity ?qty=x\nvar qty=location.search?Number(location.search.split('=')[1]):1;var dispatch=useDispatch();// useSelector is to grab what we want from the state\nvar cart=useSelector(function(state){return state.cart;});var cartItems=cart.cartItems;// Add two decimals to price if needed\nvar addDecimals=function addDecimals(num){return(Math.round(num*100)/100).toFixed(2);};// make request here upon component load\nuseEffect(function(){// Fire off action to add item and quantity to cart\nif(productId){dispatch(addToCart(productId,qty));}},[dispatch,productId,qty]);// Dependencies, on change they fire off useEffect\nvar removeFromCartHandler=function removeFromCartHandler(id){dispatch(removeFromCart(id));};var checkoutHandler=function checkoutHandler(){history.push('/login?redirect=shipping');};return/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{md:8,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Shopping Cart\"}),cartItems.length===0?/*#__PURE__*/_jsxs(Message,{children:[\"Your cart is empty \",/*#__PURE__*/_jsx(Link,{to:\"/\",children:\"Go Back\"})]}):/*#__PURE__*/_jsx(ListGroup,{variant:\"flush\",children:cartItems.map(function(item){return/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:2,children:/*#__PURE__*/_jsx(Link,{to:\"/product/\".concat(item.product),children:/*#__PURE__*/_jsx(Image,{src:item.image,alt:item.name,fluid:true,rounded:true})})}),/*#__PURE__*/_jsx(Col,{md:3,children:/*#__PURE__*/_jsx(Link,{to:\"/product/\".concat(item.product),children:item.name})}),/*#__PURE__*/_jsxs(Col,{md:2,children:[\"USD\",item.price]}),/*#__PURE__*/_jsx(Col,{md:2,children:/*#__PURE__*/_jsx(Form.Control,{as:\"select\",value:item.qty,onChange:function onChange(e){return dispatch(addToCart(item.product,Number(e.target.value)));},children:_toConsumableArray(Array(item.countInStock).keys()).map(function(x){return/*#__PURE__*/_jsx(\"option\",{value:x+1,children:x+1},x+1);})})}),/*#__PURE__*/_jsx(Col,{md:2,children:/*#__PURE__*/_jsx(Button,{type:\"button\",variant:\"light\",onClick:function onClick(){return removeFromCartHandler(item.product);},children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-trash\"})})})]})},item.product);})})]}),/*#__PURE__*/_jsx(Col,{md:4,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(ListGroup,{variant:\"flush\",children:[/*#__PURE__*/_jsxs(ListGroup.Item,{children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Subtotal (\",cartItems.reduce(function(acc,item){return acc+item.qty;},0),\") items\"]}),/*#__PURE__*/_jsxs(\"span\",{className:\"push-to-right\",children:[\"USD\",addDecimals(cartItems.reduce(function(acc,item){return acc+item.qty*item.price;},0).toFixed(2))]})]}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsx(Button,{type:\"button\",className:\"btn-block\",disabled:cartItems.length===0,onClick:checkoutHandler,children:\"Proceed to Checkout\"})})]})})})]});};export default CartScreen;","map":{"version":3,"names":["React","useEffect","Link","useDispatch","useSelector","Row","Col","ListGroup","Image","Form","Button","Card","Message","addToCart","removeFromCart","CartScreen","match","location","history","productId","params","id","qty","search","Number","split","dispatch","cart","state","cartItems","addDecimals","num","Math","round","toFixed","removeFromCartHandler","checkoutHandler","push","length","map","item","product","image","name","price","e","target","value","Array","countInStock","keys","x","reduce","acc"],"sources":["C:/fyp-final-project/fyp-react-complete-ecommerce/frontend/src/screens/CartScreen.js"],"sourcesContent":["import React, { useEffect } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { Row, Col, ListGroup, Image, Form, Button, Card } from 'react-bootstrap'\r\nimport Message from '../components/Message'\r\nimport { addToCart, removeFromCart } from '../actions/cartActions'\r\n\r\nconst CartScreen = ({ match, location, history }) => {\r\n\t// Get product id\r\n\tconst productId = match.params.id\r\n\r\n\t// Get the quantity ?qty=x\r\n\tconst qty = location.search ? Number(location.search.split('=')[1]) : 1\r\n\r\n\tconst dispatch = useDispatch()\r\n\r\n\t// useSelector is to grab what we want from the state\r\n\tconst cart = useSelector((state) => state.cart)\r\n\tconst { cartItems } = cart\r\n\r\n\t// Add two decimals to price if needed\r\n\tconst addDecimals = (num) => {\r\n\t\treturn (Math.round(num * 100) / 100).toFixed(2)\r\n\t}\r\n\r\n\t// make request here upon component load\r\n\tuseEffect(() => {\r\n\t\t// Fire off action to add item and quantity to cart\r\n\t\tif (productId) {\r\n\t\t\tdispatch(addToCart(productId, qty))\r\n\t\t}\r\n\t}, [dispatch, productId, qty]) // Dependencies, on change they fire off useEffect\r\n\r\n\tconst removeFromCartHandler = (id) => {\r\n\t\tdispatch(removeFromCart(id))\r\n\t}\r\n\tconst checkoutHandler = () => {\r\n\t\thistory.push('/login?redirect=shipping')\r\n\t}\r\n\treturn (\r\n\t\t<Row>\r\n\t\t\t<Col md={8}>\r\n\t\t\t\t<h1>Shopping Cart</h1>\r\n\t\t\t\t{cartItems.length === 0 ? (\r\n\t\t\t\t\t<Message>\r\n\t\t\t\t\t\tYour cart is empty <Link to='/'>Go Back</Link>\r\n\t\t\t\t\t</Message>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<ListGroup variant='flush'>\r\n\t\t\t\t\t\t{cartItems.map((item) => (\r\n\t\t\t\t\t\t\t<ListGroup.Item key={item.product}>\r\n\t\t\t\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t\t\t\t<Col md={2}>\r\n\t\t\t\t\t\t\t\t\t\t<Link to={`/product/${item.product}`}>\r\n\t\t\t\t\t\t\t\t\t\t\t<Image src={item.image} alt={item.name} fluid rounded />\r\n\t\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t\t<Col md={3}>\r\n\t\t\t\t\t\t\t\t\t\t<Link to={`/product/${item.product}`}>{item.name}</Link>\r\n\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t\t<Col md={2}>USD{item.price}</Col>\r\n\t\t\t\t\t\t\t\t\t<Col md={2}>\r\n\t\t\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\t\t\tas='select'\r\n\t\t\t\t\t\t\t\t\t\t\tvalue={item.qty}\r\n\t\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\t\t\t\t\tdispatch(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\taddToCart(item.product, Number(e.target.value))\r\n\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t{/* Getting countInStock keys */}\r\n\t\t\t\t\t\t\t\t\t\t\t{[...Array(item.countInStock).keys()].map((x) => (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<option key={x + 1} value={x + 1}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{x + 1}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t\t\t</Form.Control>\r\n\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t\t<Col md={2}>\r\n\t\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\t\ttype='button'\r\n\t\t\t\t\t\t\t\t\t\t\tvariant='light'\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => removeFromCartHandler(item.product)}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<i className='fas fa-trash'></i>\r\n\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t\t</ListGroup.Item>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</ListGroup>\r\n\t\t\t\t)}\r\n\t\t\t</Col>\r\n\t\t\t<Col md={4}>\r\n\t\t\t\t<Card>\r\n\t\t\t\t\t<ListGroup variant='flush'>\r\n\t\t\t\t\t\t<ListGroup.Item>\r\n\t\t\t\t\t\t\t<h2>\r\n\t\t\t\t\t\t\t\tSubtotal ({cartItems.reduce((acc, item) => acc + item.qty, 0)})\r\n\t\t\t\t\t\t\t\titems\r\n\t\t\t\t\t\t\t</h2>\r\n\t\t\t\t\t\t\t<span className='push-to-right'>\r\n\t\t\t\t\t\t\t\tUSD\r\n\t\t\t\t\t\t\t\t{addDecimals(\r\n\t\t\t\t\t\t\t\t\tcartItems\r\n\t\t\t\t\t\t\t\t\t\t.reduce((acc, item) => acc + item.qty * item.price, 0)\r\n\t\t\t\t\t\t\t\t\t\t.toFixed(2)\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</ListGroup.Item>\r\n\t\t\t\t\t\t<ListGroup.Item>\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\ttype='button'\r\n\t\t\t\t\t\t\t\tclassName='btn-block'\r\n\t\t\t\t\t\t\t\tdisabled={cartItems.length === 0}\r\n\t\t\t\t\t\t\t\tonClick={checkoutHandler}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tProceed to Checkout\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</ListGroup.Item>\r\n\t\t\t\t\t</ListGroup>\r\n\t\t\t\t</Card>\r\n\t\t\t</Col>\r\n\t\t</Row>\r\n\t)\r\n}\r\n\r\nexport default CartScreen\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}